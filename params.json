{"google":"UA-33059328-1","body":"[![Build Status](http://travis-ci.org/blatyo/webhook-payload.png)](http://travis-ci.org/blatyo/webhook-payload)\r\n\r\nThis gem is a convenience wrapper for [Github's webhook payload](https://help.github.com/articles/post-receive-hooks) that is triggered from a post receive hook. Feed it a hash of data and it will parse it into an object that you can use.\r\n\r\n## Setup\r\n\r\n**Gemfile**\r\n``` ruby\r\ngem 'webhook-payload'\r\n```\r\n\r\n**Manual**\r\n``` ruby\r\nrequire 'webhook/payload'\r\n```\r\n\r\n## Usage\r\n\r\nSay you have a hash from a post receive hook like so:\r\n\r\n``` ruby\r\npayload_data = {\r\n  \"before\" => \"5aef35982fb2d34e9d9d4502f6ede1072793222d\",\r\n  \"repository\" => {\r\n    \"url\" => \"http://github.com/defunkt/github\",\r\n    \"name\" => \"github\",\r\n    \"description\" => \"You're lookin' at it.\",\r\n    \"watchers\" => 5,\r\n    \"forks\" => 2,\r\n    \"private\" => 1,\r\n    \"owner\" => {\r\n      \"email\" => \"chris@ozmm.org\",\r\n      \"name\" => \"defunkt\"\r\n    }\r\n  },\r\n  \"commits\" => [\r\n    {\r\n      \"id\" => \"41a212ee83ca127e3c8cf465891ab7216a705f59\",\r\n      \"url\" => \"http://github.com/defunkt/github/commit/41a212ee83ca127e3c8cf465891ab7216a705f59\",\r\n      \"author\" => {\r\n        \"email\" => \"chris@ozmm.org\",\r\n        \"name\" => \"Chris Wanstrath\"\r\n      },\r\n      \"message\" => \"okay i give in\",\r\n      \"timestamp\" => \"2008-02-15T14:57:17-08:00\",\r\n      \"added\" => [\"filepath.rb\"]\r\n    },\r\n    {\r\n      \"id\" => \"de8251ff97ee194a289832576287d6f8ad74e3d0\",\r\n      \"url\" => \"http://github.com/defunkt/github/commit/de8251ff97ee194a289832576287d6f8ad74e3d0\",\r\n      \"author\" => {\r\n        \"email\" => \"chris@ozmm.org\",\r\n        \"name\" => \"Chris Wanstrath\"\r\n      },\r\n      \"message\" => \"update pricing a tad\",\r\n      \"timestamp\" => \"2008-02-15T14:36:34-08:00\"\r\n    }\r\n  ],\r\n  \"after\" => \"de8251ff97ee194a289832576287d6f8ad74e3d0\",\r\n  \"ref\" => \"refs/heads/master\"\r\n}\r\n```\r\n\r\nYou can load that into an object with:\r\n\r\n``` ruby\r\npayload = Webhook::Payload.new(payload_data)\r\n```\r\n\r\nThen you can access the data via methods rather than through hash keys. It also does conversion of timestamps to `Time`, integer booleans to `true` or `false`, urls to `URI`, and file to `Pathname`.\r\n\r\n``` ruby\r\npayload.after                         #=> \"de8251ff97ee194a289832576287d6f8ad74e3d0\"\r\npayload.repository.url                #=> #<URI::HTTP:0x007ff14b0ace60 URL:http://github.com/defunkt/github>\r\npayload.commits.first.author.name     #=> \"Chris Wanstrath\"\r\npayload.commits.first.timestamp       #=> 2008-02-15 17:57:17 -0500\r\npayload.commits.first.timestamp.class #=> Time\r\npayload.commits.first.added.first     #=> #<Pathname:filepath.rb>\r\npayload.repository.private?           #=> true\r\n```\r\n\r\nHopefully, everything else you can do is pretty obvious. Method names and hash key names are all the same.\r\n\r\n## Note on Reporting Issues\r\n\r\n* Try to make a failing test case\r\n* Tell me which version of ruby you're using\r\n* Tell me which OS you are using\r\n* Provide me with any extra files if necessary\r\n\r\n## Note on Patches/Pull Requests\r\n* Fork the project.\r\n* Make your feature addition or bug fix.\r\n* Add tests for it. This is important so I don't break it in a future version unintentionally.\r\n* Commit, do not mess with rakefile, version, or history. (if you want to have your own version, that is fine but bump version in a commit by itself I can ignore when I pull)\r\n* Send me a pull request. Bonus points for topic branches.","name":"Webhook-payload","note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Enjoy the niceties of working with objects rather than strings."}